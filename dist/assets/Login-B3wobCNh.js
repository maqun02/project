import{r as u,o as M,a as t,b as E,c as L,d as s,e as o,u as d,s as S,m as C,w as a,f as F,l as I,g,h as U,E as B,i as N,n as q}from"./index-BxO9RYUF.js";import{u as D}from"./user-Tep1gqvQ.js";import{_ as z}from"./_plugin-vue_export-helper-xacGa6pw.js";const R={class:"login-form-wrapper"},T={class:"login-header"},W={class:"theme-switch"},j={class:"login-footer"},A={__name:"Login",setup(G){const v=N(),w=D(),p=u(null),m=u(!1),r=u(localStorage.getItem("darkMode")==="true"),l=u({username:"",password:""}),k={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]};function V(i){i?(document.documentElement.classList.add("dark"),localStorage.setItem("darkMode","true")):(document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode","false"))}function f(){p.value.validate(async i=>{if(i){m.value=!0;try{await w.login(l.value),B.success("登录成功"),v.push("/fingerprint-recognition")}catch(e){console.error("登录失败:",e)}finally{m.value=!1}}else return!1})}return M(()=>{r.value&&document.documentElement.classList.add("dark")}),(i,e)=>{const b=t("el-switch"),_=t("el-input"),c=t("el-form-item"),x=t("el-button"),h=t("router-link"),y=t("el-form");return E(),L("div",{class:q(["login-container",{dark:r.value}])},[s("div",R,[s("div",T,[e[3]||(e[3]=s("h2",null,"FWF 指纹识别系统",-1)),s("div",W,[o(b,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=n=>r.value=n),"inline-prompt":"","active-icon":d(C),"inactive-icon":d(S),onChange:V},null,8,["modelValue","active-icon","inactive-icon"])])]),o(y,{ref_key:"loginForm",ref:p,model:l.value,rules:k,"label-width":"0",class:"login-form",onSubmit:U(f,["prevent"])},{default:a(()=>[o(c,{prop:"username"},{default:a(()=>[o(_,{modelValue:l.value.username,"onUpdate:modelValue":e[1]||(e[1]=n=>l.value.username=n),placeholder:"用户名","prefix-icon":d(F)},null,8,["modelValue","prefix-icon"])]),_:1}),o(c,{prop:"password"},{default:a(()=>[o(_,{modelValue:l.value.password,"onUpdate:modelValue":e[2]||(e[2]=n=>l.value.password=n),type:"password",placeholder:"密码","prefix-icon":d(I),"show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),o(c,null,{default:a(()=>[o(x,{type:"primary",loading:m.value,class:"login-btn",onClick:f},{default:a(()=>e[4]||(e[4]=[g(" 登录 ")])),_:1},8,["loading"])]),_:1}),s("div",j,[e[6]||(e[6]=s("span",null,"没有账号？",-1)),o(h,{to:"/register"},{default:a(()=>e[5]||(e[5]=[g("立即注册")])),_:1})])]),_:1},8,["model"])])],2)}}},O=z(A,[["__scopeId","data-v-835ba7af"]]);export{O as default};
