import{i as h,r as f,o as S,a as n,b as U,c as C,d as i,e as r,u,s as q,m as I,w as l,f as P,j as R,l as v,g as w,h as B,E as F,n as L}from"./index-BxO9RYUF.js";import{u as N}from"./user-Tep1gqvQ.js";import{_ as D}from"./_plugin-vue_export-helper-xacGa6pw.js";const j={class:"register-form-wrapper"},z={class:"register-header"},T={class:"theme-switch"},A={class:"register-footer"},G={__name:"Register",setup(H){const V=h(),x=N(),c=f(null),g=f(!1),m=f(localStorage.getItem("darkMode")==="true"),o=f({username:"",email:"",password:"",password_confirm:""}),k={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,validator:(t,e,a)=>{e===""?a(new Error("请输入密码")):(o.value.password_confirm!==""&&c.value.validateField("password_confirm"),a())},trigger:"blur"},{min:6,message:"密码长度不能小于6个字符",trigger:"blur"}],password_confirm:[{required:!0,validator:(t,e,a)=>{e===""?a(new Error("请再次输入密码")):e!==o.value.password?a(new Error("两次输入密码不一致!")):a()},trigger:"blur"}]};function b(t){t?(document.documentElement.classList.add("dark"),localStorage.setItem("darkMode","true")):(document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode","false"))}function _(){c.value.validate(async t=>{if(t){g.value=!0;try{await x.register(o.value),F.success("注册成功，请登录"),V.push("/login")}catch(e){console.error("注册失败:",e)}finally{g.value=!1}}else return!1})}return S(()=>{m.value&&document.documentElement.classList.add("dark")}),(t,e)=>{const a=n("el-switch"),p=n("el-input"),d=n("el-form-item"),y=n("el-button"),E=n("router-link"),M=n("el-form");return U(),C("div",{class:L(["register-container",{dark:m.value}])},[i("div",j,[i("div",z,[e[5]||(e[5]=i("h2",null,"用户注册",-1)),i("div",T,[r(a,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),"inline-prompt":"","active-icon":u(I),"inactive-icon":u(q),onChange:b},null,8,["modelValue","active-icon","inactive-icon"])])]),r(M,{ref_key:"registerForm",ref:c,model:o.value,rules:k,"label-width":"0",class:"register-form",onSubmit:B(_,["prevent"])},{default:l(()=>[r(d,{prop:"username"},{default:l(()=>[r(p,{modelValue:o.value.username,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.username=s),placeholder:"用户名","prefix-icon":u(P)},null,8,["modelValue","prefix-icon"])]),_:1}),r(d,{prop:"email"},{default:l(()=>[r(p,{modelValue:o.value.email,"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.email=s),placeholder:"邮箱","prefix-icon":u(R)},null,8,["modelValue","prefix-icon"])]),_:1}),r(d,{prop:"password"},{default:l(()=>[r(p,{modelValue:o.value.password,"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.password=s),type:"password",placeholder:"密码","prefix-icon":u(v),"show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),r(d,{prop:"password_confirm"},{default:l(()=>[r(p,{modelValue:o.value.password_confirm,"onUpdate:modelValue":e[4]||(e[4]=s=>o.value.password_confirm=s),type:"password",placeholder:"确认密码","prefix-icon":u(v),"show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),r(d,null,{default:l(()=>[r(y,{type:"primary",loading:g.value,class:"register-btn",onClick:_},{default:l(()=>e[6]||(e[6]=[w(" 注册 ")])),_:1},8,["loading"])]),_:1}),i("div",A,[e[8]||(e[8]=i("span",null,"已有账号？",-1)),r(E,{to:"/login"},{default:l(()=>e[7]||(e[7]=[w("立即登录")])),_:1})])]),_:1},8,["model"])])],2)}}},X=D(G,[["__scopeId","data-v-16887b5c"]]);export{X as default};
